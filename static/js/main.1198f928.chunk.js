(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,n){n(198),e.exports=n(494)},207:function(e,t,n){},209:function(e,t,n){},271:function(e,t){},358:function(e,t,n){},417:function(e,t,n){},494:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),a=n(14),i=n.n(a),c=(n(207),n(209),n(188)),s=n.n(c),l=n(115),u=n.n(l),m=n(72),f=n.n(m),p=n(112),h=n.n(p),b=n(189),y=n.n(b),g=(n(358),n(191)),d=n.n(g),v=n(23),w=n.n(v),S=n(69),E=n.n(S);function k(e){return e.substring(0,6)}function O(e){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t){return!t||"object"!==O(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,_(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){var e=k(this.props.branch.commit.sha);void 0!==this.props.commit&&(e=this.props.commit.commit.author.name+": "+this.props.commit.commit.message);var t="loading...";void 0!==this.props.commit&&(t=E()(this.props.commit.commit.author.date).fromNow());var n="loading";return void 0!==this.props.commit&&void 0!==this.props.commit.state&&(n=this.props.commit.state),r.a.createElement(y.a,{className:"job-card "+n},r.a.createElement(d.a,null,r.a.createElement(w.a,{variant:"headline",component:"h2",className:"job-name"},this.props.branch.name),r.a.createElement(w.a,{variant:"subheading",component:"h3",className:"commit-desc"},e),r.a.createElement(w.a,{component:"p",className:"commit-desc"},t)))}}])&&j(n.prototype,a),i&&j(n,i),t}();n(417);function x(e){return(x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e,t){return!t||"object"!==x(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=N(this,B(t).call(this,e))).fetchBranches=function(){n.props.client.repos.getBranches({owner:n.props.owner,repo:n.props.repo}).then(function(e){var t=e.data;console.debug("Fetched branches"),n.setState({branches:t}),t.forEach(function(e){n.fetchCommit(e.commit.sha)})}).catch(console.error)},n.state={branches:[],commits:new Map},n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;this.fetchBranches(),this.timer=window.setInterval(function(){e.fetchBranches()},7e4)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.timer)}},{key:"fetchCommit",value:function(e){var t=this;this.props.client.repos.getCommit({owner:this.props.owner,repo:this.props.repo,sha:e}).then(function(n){var o=n.data;console.debug("Fetched commit ".concat(k(e)));var r=Object.assign({},t.getCommit(e),o);t.setState({commits:new Map(t.state.commits).set(e,r)}),t.fetchStatus(e)}).catch(console.error)}},{key:"fetchStatus",value:function(e){var t=this;this.props.client.repos.getCombinedStatusForRef({owner:this.props.owner,repo:this.props.repo,ref:e}).then(function(n){var o=n.data;console.debug("Fetched status for ".concat(k(e)));var r=Object.assign({},t.getCommit(e),{state:o.state,statuses:o.statuses});t.setState({commits:new Map(t.state.commits).set(e,r)})}).catch(console.error)}},{key:"getCommit",value:function(e){return this.state.commits.get(e)}},{key:"render",value:function(){var e=this,t=this.state.branches.slice().sort(function(t,n){if(!e.state.commits.has(t.commit.sha)&&!e.state.commits.has(n.commit.sha))return 0;if(!e.state.commits.has(t.commit.sha))return 2;if(!e.state.commits.has(n.commit.sha))return-2;var o=e.getCommit(t.commit.sha).commit.author.date,r=e.getCommit(n.commit.sha).commit.author.date;return o===r?0:E()(o).isBefore(r)?1:-1});return r.a.createElement(h.a,{container:!0,spacing:16,className:"job-grid"},t.map(function(t){return r.a.createElement(h.a,{item:!0,xs:4,key:t.name},r.a.createElement(T,{branch:t,commit:e.getCommit(t.commit.sha)}))}))}}])&&I(n.prototype,a),i&&I(n,i),t}(),F=n(196),G=n(39),M=n.n(G),V=n(113),A=n.n(V),D=n(114),H=n.n(D),J=n(192),L=n.n(J),U=n(193),Q=n.n(U),$=n(111),q=n.n($),z=n(71),K=n.n(z),X=n(195),Y=n.n(X),Z=n(194),ee=n.n(Z);function te(e){return(te="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oe(e,t){return!t||"object"!==te(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=s()(),ce=M()({palette:{type:"dark"}});function se(e){return r.a.createElement(Y.a,Object.assign({direction:"up"},e))}var le=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=oe(this,re(t).call(this,e))).handleSettingsSubmit=function(e){e.preventDefault();var t=e.target.elements.owner.value,o=e.target.elements.repo.value,r=e.target.elements.token.value;r!==n.state.token&&ie.authenticate({type:"token",token:r}),localStorage.setItem("owner",t),localStorage.setItem("repo",o),localStorage.setItem("token",r),n.setState({owner:t,repo:o,token:r,isSettingsOpen:!1})},n.handleOpenSettings=function(){n.setState({isSettingsOpen:!0})},n.handleCloseSettings=function(){n.setState({isSettingsOpen:!1})},n.renderTokenHelperText=function(){return r.a.createElement("span",null,"Go get a token at\xa0",r.a.createElement("a",{href:"https://github.com/settings/tokens/new?scopes=repo:status",target:"_blank"},"Github Settings"))};var o=localStorage.getItem("token");return n.state={owner:localStorage.getItem("owner"),repo:localStorage.getItem("repo"),token:o,isSettingsOpen:!o},o&&ie.authenticate({type:"token",token:o}),n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){return r.a.createElement(F.a,{theme:ce},r.a.createElement(A.a,{position:"static",color:"default"},r.a.createElement(H.a,null,r.a.createElement(w.a,{variant:"title",color:"inherit",style:{flexGrow:1}},this.state.owner," / ",this.state.repo),r.a.createElement(u.a,{onClick:this.handleOpenSettings},"Settings"))),r.a.createElement(W,Object.assign({client:ie},this.state)),r.a.createElement(L.a,{fullScreen:!0,open:this.state.isSettingsOpen,onClose:this.handleCloseSettings,TransitionComponent:se},r.a.createElement("form",{onSubmit:this.handleSettingsSubmit},r.a.createElement(A.a,{color:"default",style:{position:"relative"}},r.a.createElement(H.a,null,r.a.createElement(Q.a,{color:"inherit",onClick:this.handleCloseSettings,"aria-label":"Close"},r.a.createElement(ee.a,null)),r.a.createElement(w.a,{variant:"title",color:"inherit",style:{flexGrow:1}},"Settings"),r.a.createElement(u.a,{color:"inherit",type:"submit"},"Save"))),r.a.createElement(q.a,null,r.a.createElement(K.a,null,r.a.createElement(f.a,{label:"Owner",name:"owner",defaultValue:this.state.owner})),r.a.createElement(K.a,null,r.a.createElement(f.a,{label:"Repository",name:"repo",defaultValue:this.state.repo})),r.a.createElement(K.a,null,r.a.createElement(f.a,{label:"Personal Access Token",name:"token",defaultValue:this.state.token,helperText:this.renderTokenHelperText()}))))))}}])&&ne(n.prototype,a),i&&ne(n,i),t}(),ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function me(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(le,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/github-monitor",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/github-monitor","/service-worker.js");ue?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):me(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):me(e)})}}()}},[[197,2,1]]]);
//# sourceMappingURL=main.1198f928.chunk.js.map