(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(t,e,n){n(198),t.exports=n(494)},207:function(t,e,n){},209:function(t,e,n){},271:function(t,e){},358:function(t,e,n){},417:function(t,e,n){},494:function(t,e,n){"use strict";n.r(e);var o=n(1),r=n.n(o),a=n(14),i=n.n(a),c=(n(207),n(209),n(188)),s=n.n(c),l=n(115),u=n.n(l),m=n(72),f=n.n(m),p=n(112),h=n.n(p),b=n(189),y=n.n(b),g=(n(358),n(191)),d=n.n(g),v=n(23),w=n.n(v),S=n(69),E=n.n(S);function O(t){return t.substring(0,6)}function k(t){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function C(t,e){return!e||"object"!==k(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var T=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,_(e).apply(this,arguments))}var n,a,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,o["Component"]),n=e,(a=[{key:"render",value:function(){var t=O(this.props.branch.commit.sha);void 0!==this.props.commit&&(t=this.props.commit.commit.author.name+": "+this.props.commit.commit.message);var e="loading...";void 0!==this.props.commit&&(e=E()(this.props.commit.commit.author.date).fromNow());var n="loading";return void 0!==this.props.commit&&void 0!==this.props.commit.state&&(n=this.props.commit.state),r.a.createElement(y.a,{className:"job-card "+n},r.a.createElement(d.a,null,r.a.createElement(w.a,{variant:"headline",component:"h2",className:"job-name"},this.props.branch.name),r.a.createElement(w.a,{variant:"subheading",component:"h3",className:"commit-desc"},t),r.a.createElement(w.a,{component:"p",className:"commit-desc"},e)))}}])&&j(n.prototype,a),i&&j(n,i),e}();n(417);function I(t){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function N(t,e){return!e||"object"!==I(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var W=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=N(this,B(e).call(this,t))).fetchBranches=function(){n.props.client.repos.getBranches({owner:n.props.owner,repo:n.props.repo}).then(function(t){var e=t.data;console.debug("Fetched branches"),n.setState({branches:e}),e.forEach(function(t){n.fetchCommit(t.commit.sha)})}).catch(console.error)},n.state={branches:[],commits:new Map},n}var n,a,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(e,o["Component"]),n=e,(a=[{key:"componentDidMount",value:function(){var t=this;this.fetchBranches(),this.timer=window.setInterval(function(){t.fetchBranches()},3e4)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.timer)}},{key:"fetchCommit",value:function(t){var e=this;this.props.client.repos.getCommit({owner:this.props.owner,repo:this.props.repo,sha:t}).then(function(n){var o=n.data;console.debug("Fetched commit ".concat(O(t)));var r=Object.assign({},e.getCommit(t),o);e.setState({commits:new Map(e.state.commits).set(t,r)}),e.fetchStatus(t)}).catch(console.error)}},{key:"fetchStatus",value:function(t){var e=this;this.props.client.repos.getCombinedStatusForRef({owner:this.props.owner,repo:this.props.repo,ref:t}).then(function(n){var o=n.data;console.debug("Fetched status for ".concat(O(t)));var r=Object.assign({},e.getCommit(t),{state:o.state,statuses:o.statuses});e.setState({commits:new Map(e.state.commits).set(t,r)})}).catch(console.error)}},{key:"getCommit",value:function(t){return this.state.commits.get(t)}},{key:"render",value:function(){var t=this,e=this.state.branches.slice().sort(function(e,n){if(!t.state.commits.has(e.commit.sha)&&!t.state.commits.has(n.commit.sha))return 0;if(!t.state.commits.has(e.commit.sha))return 2;if(!t.state.commits.has(n.commit.sha))return-2;var o=t.getCommit(e.commit.sha).commit.author.date,r=t.getCommit(n.commit.sha).commit.author.date;return o===r?0:E()(o).isBefore(r)?1:-1});return r.a.createElement(h.a,{container:!0,spacing:16,className:"job-grid"},e.map(function(e){return r.a.createElement(h.a,{item:!0,xs:4,key:e.name},r.a.createElement(T,{branch:e,commit:t.getCommit(e.commit.sha)}))}))}}])&&x(n.prototype,a),i&&x(n,i),e}(),F=n(196),M=n(39),V=n.n(M),D=n(113),G=n.n(D),J=n(114),L=n.n(J),U=n(192),A=n.n(U),Q=n(193),$=n.n(Q),q=n(111),z=n.n(q),H=n(71),K=n.n(H),X=n(195),Y=n.n(X),Z=n(194),tt=n.n(Z);function et(t){return(et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ot(t,e){return!e||"object"!==et(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var it=s()(),ct=V()({palette:{type:"dark"}});function st(t){return r.a.createElement(Y.a,Object.assign({direction:"up"},t))}var lt=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ot(this,rt(e).call(this,t))).handleSettingsSubmit=function(t){t.preventDefault();var e=t.target.elements.owner.value,o=t.target.elements.repo.value,r=t.target.elements.token.value;r!==n.state.token&&it.authenticate({type:"token",token:r}),localStorage.setItem("owner",e),localStorage.setItem("repo",o),localStorage.setItem("token",r),n.setState({owner:e,repo:o,token:r,isSettingsOpen:!1})},n.handleOpenSettings=function(){n.setState({isSettingsOpen:!0})},n.handleCloseSettings=function(){n.setState({isSettingsOpen:!1})};var o=localStorage.getItem("token");return n.state={owner:localStorage.getItem("owner"),repo:localStorage.getItem("repo"),token:o,isSettingsOpen:!o},o&&it.authenticate({type:"token",token:o}),n}var n,a,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,o["Component"]),n=e,(a=[{key:"render",value:function(){return r.a.createElement(F.a,{theme:ct},r.a.createElement(G.a,{position:"static",color:"default"},r.a.createElement(L.a,null,r.a.createElement(w.a,{variant:"title",color:"inherit",style:{flexGrow:1}},this.state.owner," / ",this.state.repo),r.a.createElement(u.a,{onClick:this.handleOpenSettings},"Settings"))),r.a.createElement(W,Object.assign({client:it},this.state)),r.a.createElement(A.a,{fullScreen:!0,open:this.state.isSettingsOpen,onClose:this.handleCloseSettings,TransitionComponent:st},r.a.createElement("form",{onSubmit:this.handleSettingsSubmit},r.a.createElement(G.a,{color:"default",style:{position:"relative"}},r.a.createElement(L.a,null,r.a.createElement($.a,{color:"inherit",onClick:this.handleCloseSettings,"aria-label":"Close"},r.a.createElement(tt.a,null)),r.a.createElement(w.a,{variant:"title",color:"inherit",style:{flexGrow:1}},"Settings"),r.a.createElement(u.a,{color:"inherit",type:"submit"},"Save"))),r.a.createElement(z.a,null,r.a.createElement(K.a,null,r.a.createElement(f.a,{label:"Owner",name:"owner",defaultValue:this.state.owner})),r.a.createElement(K.a,null,r.a.createElement(f.a,{label:"Repo",name:"repo",defaultValue:this.state.repo})),r.a.createElement(K.a,null,r.a.createElement(f.a,{label:"Token",name:"token",defaultValue:this.state.token}))))))}}])&&nt(n.prototype,a),i&&nt(n,i),e}(),ut=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function mt(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}i.a.render(r.a.createElement(lt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/github-monitor",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/github-monitor","/service-worker.js");ut?(function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):mt(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):mt(t)})}}()}},[[197,2,1]]]);
//# sourceMappingURL=main.e11c07a7.chunk.js.map