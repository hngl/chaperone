(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,n){n(117),e.exports=n(324)},126:function(e,t,n){},128:function(e,t,n){},188:function(e,t,n){},246:function(e,t,n){},324:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(14),i=n.n(a),c=(n(126),n(128),n(107)),s=n.n(c),l=n(27),u=n.n(l),m=n(46),f=n.n(m),p=n(67),h=n.n(p),b=n(43),g=n.n(b),y=(n(188),n(64)),d=n.n(y),v=n(17),w=n.n(v),S=n(42),E=n.n(S);function k(e){return e.substring(0,6)}function O(e){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t){return!t||"object"!==O(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,_(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){var e=k(this.props.branch.commit.sha);void 0!==this.props.commit&&(e=this.props.commit.commit.message);var t="loading...";void 0!==this.props.commit&&(t=this.props.commit.commit.committer.name+", "+E()(this.props.commit.commit.committer.date).fromNow());var n="loading";return void 0!==this.props.commit&&void 0!==this.props.commit.state&&(n=this.props.commit.state),r.a.createElement(g.a,{className:"job-card "+n},r.a.createElement(d.a,null,r.a.createElement(w.a,{variant:"headline",component:"h2",className:"job-name"},this.props.branch.name),r.a.createElement(w.a,{variant:"subheading",component:"h3",className:"commit-desc"},e),r.a.createElement(w.a,{component:"p",className:"commit-desc"},t)))}}])&&j(n.prototype,a),i&&j(n,i),t}();n(246);function x(e){return(x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(e,t){return!t||"object"!==x(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=I(this,B(t).call(this,e))).fetchBranches=function(){n.props.client.repos.listBranches({owner:n.props.owner,repo:n.props.repo}).then(function(e){var t=e.data;console.debug("Fetched branches"),n.setState({branches:t}),t.forEach(function(e){n.fetchCommit(e.commit.sha)})}).catch(console.error)},n.state={branches:[],commits:new Map},n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;this.fetchBranches(),this.timer=window.setInterval(function(){e.fetchBranches()},7e4)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.timer)}},{key:"fetchCommit",value:function(e){var t=this;this.props.client.repos.getCommit({owner:this.props.owner,repo:this.props.repo,sha:e}).then(function(n){var o=n.data;console.debug("Fetched commit ".concat(k(e)));var r=Object.assign({},t.getCommit(e),o);t.setState({commits:new Map(t.state.commits).set(e,r)}),t.fetchStatus(e)}).catch(console.error)}},{key:"fetchStatus",value:function(e){var t=this;this.props.client.repos.getCombinedStatusForRef({owner:this.props.owner,repo:this.props.repo,ref:e}).then(function(n){var o=n.data;console.debug("Fetched status for ".concat(k(e)));var r=Object.assign({},t.getCommit(e),{state:o.state,statuses:o.statuses});t.setState({commits:new Map(t.state.commits).set(e,r)})}).catch(console.error)}},{key:"getCommit",value:function(e){return this.state.commits.get(e)}},{key:"render",value:function(){var e=this,t=this.state.branches.slice().sort(function(t,n){if(!e.state.commits.has(t.commit.sha)&&!e.state.commits.has(n.commit.sha))return 0;if(!e.state.commits.has(t.commit.sha))return 2;if(!e.state.commits.has(n.commit.sha))return-2;var o=e.getCommit(t.commit.sha).commit.committer.date,r=e.getCommit(n.commit.sha).commit.committer.date;return o===r?0:E()(o).isBefore(r)?1:-1});return r.a.createElement(h.a,{container:!0,spacing:16,className:"job-grid"},t.map(function(t){return r.a.createElement(h.a,{item:!0,xs:4,key:t.name},r.a.createElement(T,{branch:t,commit:e.getCommit(t.commit.sha)}))}))}}])&&N(n.prototype,a),i&&N(n,i),t}(),G=n(115),F=n(26),M=n.n(F),V=n(68),A=n.n(V),D=n(69),H=n.n(D),J=n(109),L=n.n(J),U=n(110),z=n.n(U),Q=n(66),$=n.n(Q),q=n(45),K=n.n(q),X=n(114),Y=n.n(X),Z=n(111),ee=n.n(Z),te=n(112),ne=n.n(te),oe=n(113),re=n.n(oe);function ae(e){return(ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ce(e,t){return!t||"object"!==ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=s()(),me=M()({palette:{type:"dark"}});function fe(e){return r.a.createElement(g.a,{className:"notice-card"},r.a.createElement(ne.a,null,r.a.createElement(w.a,{variant:"body2",component:"p"},e.message)),r.a.createElement(re.a,null,r.a.createElement(u.a,{size:"small",onClick:e.onClick},"Go to Settings")))}function pe(e){return r.a.createElement(Y.a,Object.assign({direction:"up"},e))}var he=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ce(this,se(t).call(this,e))).handleSettingsSubmit=function(e){e.preventDefault();var t=e.target.elements.owner.value,o=e.target.elements.repo.value,r=e.target.elements.token.value;r!==n.state.token&&ue.authenticate({type:"token",token:r}),localStorage.setItem("owner",t),localStorage.setItem("repo",o),localStorage.setItem("token",r),n.setState({owner:t,repo:o,token:r,isSettingsOpen:!1})},n.handleOpenSettings=function(){n.setState({isSettingsOpen:!0})},n.handleCloseSettings=function(){n.setState({isSettingsOpen:!1})},n.isConfigured=function(){return n.state.owner&&n.state.repo},n.renderTokenHelperText=function(){return r.a.createElement("span",null,"Go get a token at\xa0",r.a.createElement("a",{href:"https://github.com/settings/tokens/new?scopes=repo",target:"_blank"},"Github Settings"))};var o=localStorage.getItem("token");return n.state={owner:localStorage.getItem("owner"),repo:localStorage.getItem("repo"),token:o,isSettingsOpen:!1},o&&ue.authenticate({type:"token",token:o}),n}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){return r.a.createElement(G.a,{theme:me},r.a.createElement(A.a,{position:"static",color:"default"},r.a.createElement(H.a,null,r.a.createElement(w.a,{variant:"title",color:"inherit",style:{flexGrow:1}},this.state.owner," / ",this.state.repo),r.a.createElement(u.a,{onClick:this.handleOpenSettings},"Settings"))),r.a.createElement("div",{className:"app-contents"},this.isConfigured()?r.a.createElement(R,Object.assign({client:ue},this.state)):r.a.createElement(fe,{message:"No repository configured yet. We're just getting started.",onClick:this.handleOpenSettings})),r.a.createElement(L.a,{fullScreen:!0,open:this.state.isSettingsOpen,onClose:this.handleCloseSettings,TransitionComponent:pe},r.a.createElement("form",{onSubmit:this.handleSettingsSubmit},r.a.createElement(A.a,{color:"default",style:{position:"relative"}},r.a.createElement(H.a,null,r.a.createElement(z.a,{color:"inherit",onClick:this.handleCloseSettings,"aria-label":"Close"},r.a.createElement(ee.a,null)),r.a.createElement(w.a,{variant:"title",color:"inherit",style:{flexGrow:1}},"Settings"),r.a.createElement(u.a,{color:"inherit",type:"submit"},"Save"))),r.a.createElement($.a,null,r.a.createElement(K.a,null,r.a.createElement(f.a,{label:"Owner",name:"owner",defaultValue:this.state.owner})),r.a.createElement(K.a,null,r.a.createElement(f.a,{label:"Repository",name:"repo",defaultValue:this.state.repo})),r.a.createElement(K.a,null,r.a.createElement(f.a,{label:"Personal Access Token",name:"token",defaultValue:this.state.token,helperText:this.renderTokenHelperText()}))))))}}])&&ie(n.prototype,a),i&&ie(n,i),t}(),be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ge(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(he,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/github-monitor",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/github-monitor","/service-worker.js");be?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ge(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ge(e)})}}()}},[[116,2,1]]]);
//# sourceMappingURL=main.af301f96.chunk.js.map